<!DOCTYPE html>

<html>
	<head>
		<title>YouTube Comment Visualizer | Data Overview</title>
		<link href='http://fonts.googleapis.com/css?family=Open+Sans:400,700,300' rel='stylesheet' type='text/css'>
		<link href='./css/data.css' rel="stylesheet">
	</head>
	<body>
		<div class="cards">
			<div class="cards-container cards-top">
				<div class="card">
					<div class="picture-container">
						<img class="picture" src="./img/bieber.jpg">
						<div class="arrow-left"></div>
					</div>
					<div class="picture-info">
						<div class="picture-title">BABY</div>
						<div class="picture-artist">Justin Bieber</div>
						<div class="picture-extra">
							<p>Album: My World 2.0</p>
							<p>Released: 2010</p>
						</div>
					</div>
					<div class="color bieber"></div>
				</div>
				<div class="card">
					<div class="picture-container"><img class="picture" src="./img/bsb.jpg"></div>
					<div class="picture-info">
						<div class="picture-title twolines"><p>AS LONG AS</p><p>YOU LOVE ME</p></div>
						<div class="picture-artist">Backstreet Boys</div>
						<div class="picture-extra">
							<p>Album: Backstreet's Back</p>
							<p>Released: 1997</p>
						</div>
					</div>
					<div class="color bsb"></div>
				</div>
			</div>
			<div class="cards-container cards-bottom">
				<div class="card">
					<div class="picture-container"><img class="picture" src="./img/bass.jpg"></div>
					<div class="picture-info">
						<div class="picture-title twolines"><p>ALL ABOUT</p><p>THAT BASS</p></div>
						<div class="picture-artist">Meghan Trainor</div>
						<div class="picture-extra">
							<p>Album: Title</p>
							<p>Released: 2014</p>
						</div>
					</div>
					<div class="color bass"></div>
				</div>
				<div class="card">
					<div class="picture-container"><img class="picture" src="./img/frozen.jpg"></div>
					<div class="picture-info">
						<div class="picture-title">LET IT GO</div>
						<div class="picture-artist">Frozen</div>
						<div class="picture-extra">
							<p>Album: Frozen</p>
							<p>Released: 2013</p>
						</div>
					</div>
					<div class="color frozen"></div>
				</div>
			</div>
			<div class="visual"></div>
		</div>
	</body>
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
	<script src="http://cdnjs.cloudflare.com/ajax/libs/d3/3.4.11/d3.min.js"></script>

	<style>

		body {
  			font: 10px sans-serif;
		}

		.axis path,
		.axis line {
  		fill: none;
  		stroke: white;
  		shape-rendering: crispEdges;
		}

		.bar {
  			fill: white;
		}

		.x.axis path {
  			display: none;
		}

		.x.axis text{
			stroke: white;
			font-family: sans-serif;
			font-size: 11px
		}

		.y.axis text{
			stroke: white;
			font-family: sans-serif;
			font-size: 11px
		}

		</style>
		<script>

		var margin = {top: 70, right: 0, bottom: 20, left: 200},
    		width = 850 - margin.left - margin.right,
    		height = 400 - margin.top - margin.bottom;

		var x0 = d3.scale.ordinal()
    		.rangeRoundBands([0, width], .1);

		var x1 = d3.scale.ordinal();

		var y = d3.scale.linear()
    		.range([height, 0]);

		var color = d3.scale.ordinal()
    		.range(["#FEDA1A", "#CF5CD3", "#74CDD3", "#87EB33"]);

		var xAxis = d3.svg.axis()
    		.scale(x0)
    		.orient("bottom");

		var yAxis = d3.svg.axis()
    		.scale(y)
    		.orient("left")
    		.tickFormat(d3.format(".2s"));

		var svg = d3.select(".visual").append("svg")
    		.attr("width", width + margin.left + margin.right)
    		.attr("height", height + margin.top + margin.bottom)
  			.append("g")
    		.attr("transform", "translate(" + margin.left + "," + margin.top + ")");

		d3.csv("data.csv", function(error, data) {
  			var ageNames = d3.keys(data[0]).filter(function(key) { return key !== "Song"; });

  		data.forEach(function(d) {
    		d.ages = ageNames.map(function(name) { return {name: name, value: +d[name]}; });
  		});

  		x0.domain(data.map(function(d) { return d.Song; }));
  		x1.domain(ageNames).rangeRoundBands([0, x0.rangeBand()]);
  		y.domain([0, d3.max(data, function(d) { return d3.max(d.ages, function(d) { return d.value; }); })]);

  		svg.append("g")
      		.attr("class", "x axis")
      		.attr("transform", "translate(0," + height + ")")
      		.call(xAxis);

  		svg.append("g")
      		.attr("class", "y axis")
      		.call(yAxis)
    		.append("text")
      		.attr("transform", "rotate(-90)")
      		.attr("y", 10)
      		.attr("dy", ".71em")
      		.style("text-anchor", "end")
      		.text("Number of Comments");

  		var song = svg.selectAll(".song")
    		.data(data)
    		.enter().append("g")
      		.attr("class", "g")
      		.attr("transform", function(d) { return "translate(" + x0(d.Song) + ",0)"; });

  		song.selectAll("rect")
      		.data(function(d) { return d.ages; })
    		.enter().append("rect")
      		.attr("width", 30)
      		.attr("x", function(d) { return x1(d.name); })
      		.attr("y", function(d) { return y(d.value); })
      		.attr("height", function(d) { return height - y(d.value); })
      		.style("fill", function(d) { return color(d.name); });

	});

	</script>

</html>